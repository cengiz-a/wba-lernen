<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<!-- Title of presentation -->
	<title>Workshop - AJAX</title>
	<!-- Short description of presentation -->
	<meta name="description" content="Vortrag - Web-basics">
	<!-- Author of presentation -->
	<meta name="author" content="Volker Schaefer">

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<link rel="stylesheet" href="../revealjs-framework/css/reveal.min.css">
	<link rel="stylesheet" href="../revealjs-framework/css/theme/medieninformatik.css" id="theme">

	<!-- For syntax highlighting -->
	<link rel="stylesheet" href="../revealjs-framework/lib/css/zenburn.css">

	<!-- If the query includes 'print-pdf', use the PDF print sheet -->
	<script>
		document.write('<link rel="stylesheet" href="../revealjs-framework/css/print/' + (window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper') + '.css" type="text/css" media="print">');
	</script>
	<style type="text/css">
		.tabelle {
			table-layout: fixed;
		}
		.tabelle td {
			background-color: #404040;
		}
		.tabelle td,
		.tabelle th {
			font-size: 0.8em;
			border: 4px solid black;
			text-align: center !important;
		}
		.tabelle th {
			font-weight: normal;
		}
		.kaestchen div {
			border-width: 6px;
			border-color: #77cc00;
			background-color: rgb(63, 63, 63);
			float: left;
			margin: 0 20px 20px 0;
			padding: 10px;
			width: 180px;
			height: 180px;
		}
		.fullscreenImage .reveal .slides {
			height: 100% !important;
			left: 0;
			margin: 0 auto;
			padding: 0;
			top: 0;
			width: 100% !important;
		}
		.fullscreenImage .reveal .slides > section {
			background-position-x: center;
			background-position-y: 10px;
			background-repeat: no-repeat;
			background-size: auto 90%;
			height: 100%;
			left: 0;
			margin: 0;
			position: absolute;
			top: 0;
			width: 100%;
		}
		.fullscreenImage .reveal .slides > section .bu {
			background-color: rgba(221, 17, 102, 0.8);
			top: 100px;
			display: inline-block;
			color: white;
			padding: 0 10px 0 100px;
			position: absolute;
		}
		.fullscreenImage .reveal .slides > section .quelle {
			bottom: 10px;
			color: white;
			display: inline-block;
			font-size: 14px;
			margin: 0 0 0 10px;
			position: absolute;
		}
		.fullscreenImage .reveal .slides > section p {
			margin: 0;
		}
		.nobackground .reveal .slides > section {
			background-image: none;
		}
		.whiteBackground .state-background {
			background-color: white;
		}
		.big-font {
			font-size: 1.3em !important;
		}
		.big-font li {
			margin-bottom: 30px;
		}
	</style>
	<!--[if lt IE 9]>
		<script src="../revealjs-framework/lib/js/html5shiv.js"></script>
		<![endif]-->
</head>

<body>

	<div class="reveal">
<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

<section>
					<h1>WBA1 - AJAX</h1>
					<h2>Medieninformatik</h2>
					<p>05. November 2015</p>
                    <br />
					<p>
						Studiengang Medieninformatik an der TH Köln<br/>
						Campus Gummersbach
					</p>
                    <br />
					<p>verschiedene Autoren</p>
				</section>

<section>
					<h2>Übersicht</h2>
					<ul>
						<li>Einleitung</li>
						<li>Anwendungsbeispiele</li>
						<li>Asynchronität</li>
						<li>XMLHttpRequest</li>
						                    <li>Javascript Object Notation (JSON)</li>
                    <li>Same-Origin-Policy (SOP)</li>
						<li>Frameworks</li>
						<li>Übung</li>
						<li>Vor- und Nachteile</li>
					</ul>
				</section>
				
<section>
                <h2>Was ist <span class="_pink">AJAX?</span></h2>
                <ul>
                    <li class="fragment"><b><span class="_pink">A</span></b>synchronous</li>
                    <li class="fragment"><b><span class="_pink">J</span></b>avaScript</li>
                    <li class="fragment"><b><span class="_pink">A</span></b>nd</li>
                    <li class="fragment"><b><span class="_pink">X</span></b>ML</li>

                </ul>
            </section>

<section>
					<h2>Einleitung</h2>
					<ul>
						<li>Ajax = "Asynchronous Java Script and XML"</li>
						<li>ermöglicht asynchrone Datenübertragung zwischen Webserver und Client bzw. Browser</li>
						<li>ruft Daten dynamisch vom Webserver ab ohne die Seite neu laden zu müssen</li>
						<li>kann Anfragen asynchron bearbeiten</li>
						<li>erweckt den Eindruck einer Desktopanwendung</li>
					</ul>
				</section>
				
<section>
                <img src="img/schaubild-ajax.jpg" alt="Abbildung Vorgang AJAX">

                <aside class="notes">
                    <ul>
                        <li>Client sendet Anfrage über JavaScript an den Server</li>
                        <li>Server bearbeitet die Anfrage über JavaScript und schickt eine Antwort meißt XML codiert an den Client zurück</li>
                    </ul>
                </aside>
                </ul>
            </section>
				
<section>
                <h2>Beispiel 1</h2>
                <img src="img/Beispiel%20Googlesuche.png" alt="Abbildung Googlesuche">
                <h2>Beispiel 2</h2>
                <img src="img/Beispiel%20Fehleingabe.png" alt="Abbildung Fehleingabe">
                <aside class="notes">
                    <ul>
                        <li>B1: Auto-Complete für Suchanfragen</li>
                        <li>B2: Direkte Fehlermeldung auf Falscheingaben in Forumalaren</li>
                    </ul>
                </aside>
            </section>
				
<section>
<h2>Asynchronität</h2>
<ul>
<li>normale HTTP-Anwendungen laufen nach dem Request-Response-Paradigma ab</li>
<li>es findet eine <a href="http://de.wikipedia.org/w/index.php?title=Datei:Prozessfluss-traditionell.svg&filetimestamp=20070610135734" target="_blank">synchrone Datenübertragung</a> statt</li>
<li>eine Ajax-Anwendung muss nicht nach jeder Benutzeraktion auf den Server warten</li>
<li>Die Datenübertragung ist <a href="http://de.wikipedia.org/w/index.php?title=Datei:Prozessfluss-ajax.svg&filetimestamp=20111102193443" target="_blank">asynchron</a></li>

</ul>
</section>
				

<section>
<h2>XMLHttpRequest</h2>
<ul>
	<li>XMLHttpRequest-Objekt stellt Schnittstelle für Kommunikation zwischen Client und Server zur Verfügung</li>
	<li>Daten werden über das HTTP-Protokol übertragen daher können alle HTTP-Anfragemethoden (GET, POST, HEAD, PUT) verwendet werden</li>
	<li>XMLHttpRequest wird von jedem Browser unterschiedlich gehandhabt. Es muss eine sogenannte Browserweiche eingebaut werden</li>
	
</ul>
</section>


				<!--Section 5.1 Objekt-Instanzierung -->
                <section>
                    <h2>
                        <strong>3.1</strong> Objekt-Instanzierung</h2>
                     <ul>
                        <li class="fragment">Instanzierung für alle modernen Browser
                            <pre>
                                <code>var ajaxObject = new XMLHttpRequest();</code>
                            </pre>
                        </li>
                        <br>
                        <li class="fragment">Instanzierung unter Internet Explorer 5 und 6
                            <pre>
                                <code>var ajaxObject = new ActiveXObject("Microsoft.XMLHTTP");</code>
                            </pre>
                        </li>
                        <br>
                        <li class="fragment">Überprüfen ob das XMLHttpRequest Objekt existiert
                            
<pre>
<code>var ajaxObject;
if (window.XMLHttpRequest) {
    ajaxObject = new XMLHttpRequest();
} else {
    ajaxObject = new ActiveXObject("Microsoft.XMLHTTP");
}
</code>
</pre>
                        </li>
                    </ul>
                </section>				

                  
				<!--Section 5.$ Anfrage-->
                <section>
                    <h2>
                        <strong>3.2</strong> Die Anfrage 
                        
                    </h2>
                    <h3><strong>.open(</strong>method, url, <strong>[async, username, password])</strong></h3>
                    <ul>
                        <li class="fragment">Initialisiert die Anfrage</li>
                        <li class="fragment"> 
                            <strong>method</strong> - HTTP-Methode, mit der die Anfrage gesendet wird.
                            <br>Wichtigsten Möglichkeiten sind: <strong>"GET"</strong> oder <strong>"POST"</strong>
                        </li>
                        <li class="fragment"> 
                            <strong>url</strong> - Adresse
                        </li>
                        <li class="fragment"> 
                            <strong>async</strong> - Gibt an, ob die Anfrage asynchron ist oder nicht durchgeführt wird
                            <br>Standardwert ist <strong>true</strong> 
                        </li>
                    </ul>
                    <br><br>
                    <h3><strong>.send()</strong></h3>
                    <ul>
                        <li class="fragment">Sendet die Anfrage ab</li>
                    </ul>
                    
                    

                    
                </section>
                
                
				<!--Section 5.5 Anfrage ansenden-->	
                <section>
                    <h2>
                        <strong>3.2</strong> Die Anfrage
                        
                    </h2>
                    <h3><strong>Beispiel</strong></h3>
                    <ul>    
                        <li class="fragment"> 
                            Wenn .open(...) <strong>synchron</strong> initialisiert wird (asnyc==false)
                            <br>führt Javascript den auf .send() <strong>folgenden Befehl</strong> erst dann aus,
                            <br>wenn die Anfrage komplett abgearbeitet worden ist.  
                        </li>

                    </ul>
                    
                    <pre class="fragment">
<code>ajaxObject.open("GET", "zuLadendeDatei.htm", true);
ajaxObject.send();
</code>
                    </pre>
                </section>
           
           
                <section>
                    <h2>
                        <strong>3.3</strong> Antwort
                        
                    </h2>
                    <h3 class=><strong>.responseText</strong> oder <strong>.responseXML</strong></h3>
                    <ul>    
                        <li class="fragment"> 
                            beinhaltet, bei erfolgreicher Durchführung, die Antwort des Servers 
                        </li>
                        <br>
                        <li class="fragment">
                            wenn, die Antwort des Servers im XML geliefert wird:<strong> .responseXML </strong> verwenden
                        </li>
                        <br>
                        <li class="fragment">
                           <strong>  .responseText </strong>  liefert die Antwort als String
                        </li>
                    </ul>
                    
                </section>
           
           
                <!--Section 5.2 Event-->
                <section>
                    <h2>
                        <strong>3.4</strong> Das Event
                        
                    </h2>
                    <h3 ><strong>.readyState</strong></h3>
                    <ul>
                        <li class="fragment" > 
                            Die Variable <strong>.readyState</strong> durchläuft <strong>nacheinander fünf Zustände</strong>,
                            <br>die den <strong>aktuellen Status</strong> der Anfrage mit folgenden Werten repräsentieren:
                            <br><strong>0</strong>: Anfrage nicht initalisiert
                            <br><strong>1</strong>: Serververbindung hergestellt
                            <br><strong>2</strong>: Anfrage erhalten
                            <br><strong>3</strong>: Verarbeite Anfrage
                            <br><strong>4</strong>: Anfrage verarbeitet und Antwort erhalten
                        </li>          
                    </ul>
                    
                    <h3 ><strong>.status</strong></h3>
                    <ul>
                        <li class="fragment" > 
                            Gibt nach Verarbeitung der Anfrage den <strong>HTTP-Statuscode</strong> an.
                            <br>Die zwei wichtigstens Statuscodes sind:
                            <br><strong>200</strong>: Anfrage wurde erfolgreich bearbeitet
                            <br><strong>404</strong>: Angeforderte Ressource wurde nicht gefunden
                        </li>          
                    </ul>
                </section>
                
                <!--Section 5.3 EventHandler-->
                <section>
                    <h2>
                        <strong>3.5</strong> Der EventHandler
                        
                    </h2>
                    <h3><strong>.onReadyStateChange = function(){ ... }</strong></h3>
                    <ul class="fragment">
                        <li > 
                            Die .onReadyStateChange Funktion wird wie der Funktionsname schon sagt bei 
                            <br><strong>jeder Änderung der Variablen .readyState aufgerufen</strong>
                        </li>
                        <li>
                            Wir definieren selber was bei welchem Status passieren soll
                        </li>
                    </ul>
                    <br><br>
                    <h3 ><strong>Beispiel</strong></h3>
                    <pre class="fragment">
<code>ajaxObject.onReadyStateChange = function() {
    // Bei erfolgreicher Anfrage an den Server
    if(ajaxObject.readyState == 4 && ajaxObject.status == 200){
        alert(ajaxObject.responseText);
    }
};
ajaxObject.open("GET", "http://meineDomain.de/datei.txt", true);
ajaxObject.send();
</code>
                    </pre>
                </section>
                
            
            </section>

			
            <!----------------------------------------------------------------------------------------------------------------------------->
            <!--Section 6 Bourne-->
            <section>
                <section>
                    <h2>4. Javascript Object Notation (JSON)</h2>
                    <br>
                    <li>Datenformat zum Informationsaustausch zwischen Server und Client</li>
                    <li>Speichert Variabeln, Arrays und Objecte</li>
            
                </section>


                <!--Section 6.1 Aufbau-->
                <section>
                    
                        <h2>
                            <strong>4.1</strong> Aufbau - Einfache Variabeln</h2>
                        <ul>
                            <pre>
                                <code>{ 
  "Stadt": "Gummersbach", 
  "Postleitzahl": 51643,
}</code>    </pre>
                            <spawn class="fragment">Zugriff über:&nbsp;&nbsp;<strong>.Stadt;</strong> 
                            </spawn>
                        </ul>
                    
            

                <!--Section 6.2 Array-->
               
                    <br><br>
                        <h2>
                            <strong>4.2</strong> Aufbau - Arrays</h2>
                        <ul>
                            <pre>
                                <code>{
  "Stadt": "Gummersbach", 
  "Schulen": ["FH", "Berufkolleg"],
}</code>
                            </pre>
                            
                            <spawn class="fragment">Zugriff über:&nbsp;&nbsp;<strong>.Schulen[0];</strong>
                            </spawn>
                        </ul>
                    
                </section>


                <!--Section 6.3 Object-->
                <section>
                    
                        <h2>
                            <strong>4.3</strong> Aufbau - Object</h2>
                        <ul>
                            <spawn class="fragment">
                                <pre>
                                    <code >{ 
  "Stadt": "Gummersbach", 
  "Buergermeister": {
                     "Name":"Helmenstein", 
                     "Vorname": "Frank", 
                   }
}</code>
                            </pre>
							 Zugriff über:&nbsp;&nbsp;<strong>.Buergermeister.Name;</strong>
                            <br><br>
                             Bei Leerzeichen oder Umlauten:&nbsp;&nbsp;<strong>variable["Bürgermeister"].Name</strong>
                            </spawn>
                        </ul>
                </section>
                
                
                <!--Section 6.4 Arrays in Object-->
                <section>
                    
                        <h2>
                            <strong>4.4</strong> Arrays in Object</h2>
                        <ul>
                            <pre>
                                <code >{ 
  "Stadt": "Gummersbach", 
  "Buergermeister": {
                     "Name":"Helmenstein", 
                     "Vorname": "Frank", 
                     "Autos":["Dienstwagen", "Privatwagen"];
                   }
}</code>
                            </pre>
                        <spawn class="fragment">
                           Zugriff über:&nbsp;&nbsp;<strong>.Buergermeister.Autos[0];</strong>
                            </spawn>
                        </ul>
                    
                </section>


                <!--Section 6.5 Parser-->
                <section>
                    
                        <h2>
                            <strong>4.5</strong> Aufbau - Parser</h2>
                        <ul>
                            <pre>
                                <code>var json = JSON.parse(stringVariable);</code>
                            </pre>
                            <spawn class="fragment">Wandelt einen String mit    passende Daten in eine JSON-Variable um</spawn>
                        </ul>
                    
                </section>

            </section>
			<!----------------------------------------------------------------------------------------------------------------------------->
            <!--Section 7 Cops-->
          <section>
                <section>
                    <h2>5. Same-Origin-Policy (SOP) </h2>
                    <br>
                    <li> Ist ein <strong>Schutzmechanismus</strong> im Browser der <strong>verbietet</strong>, dass clientseitige Skripte auf <strong>Ressourcen von fremden Seiten</strong> zugreifen können.
                    </li>
                    <br>
                    <li>Die Regel wird dann angewendet, wenn sich die URL, von der aktuellen <strong>URL <br> im Port, Hostnamen, oder Protokoll <u>unterscheidet</u></strong>
                    </li>
                    <br>
                    <li>
                        <strong>Verhindert viele Angriffe</strong> die sonst mit Skripten wie Javascript möglich wären
                    </li>
                    <br>
                    <li>
                        Erschwert allerdings auch die <strong>Umsetzung</strong> von <strong>AJAX</strong>
                    </li>
                </section>
              
              
                <section>
                    <h2><strong>5.1</strong> Regel umgehen mit <br><strong>C</strong>ross-<strong>O</strong>rigin <strong>R</strong>esource <strong>S</strong>haring <strong>(CORS)</strong> </h2>
                    <br>
                    <ul>
                        <li>
                            Mit CORS wird der Standard des HTTP-Headers erweitert
                        </li>
                        <br>
                        <li>
                            Der Serveradmin kann dadurch einstellen, von welcher URL, <br> mit Skripten auf Ressourcen zugegriffen werden kann. 
                        </li><br>
                        <li>
                            <strong>Access-Control-Allow-Origin: *</strong> - Erlaubt allen Seiten Zugriff
                        </li><br>
                        <li>
                            <strong>Access-Control-Allow-Origin: null</strong> - Erlaubt keiner Seite Zugriff
                        </li><br>
                        <li>
                            <strong>Access-Control-Allow-Origin: example.com</strong> - Erlaubt nur einigen Seiten Zugriff
                        </li>
                    </ul>
                </section>
              
                   <section>
                        <h2><strong>5.2</strong> Regel umgehen mit <br><strong>JSON with Padding (JSONP)</strong></h2>
                        <br>
                        
                        <ul>
                            <li> 
                                <strong>JSONP</strong> nutzt die Möglichkeit aus, <br> dass der <strong>&lt;script&gt;</strong> Tag  <u>nicht</u> von der Same-Origin-Policy betroffen ist
                            </li>
                            <li>
                                Man kann im Gegensatz zu <strong>CORS</strong> allerdings nur GET-Anfragen senden
                            </li>
                            <li>
                                Der AJAX-Anteil fällt mit dieser Methode komplett weg 
                            </li>
                        </ul>
                    </section>
              </section>


<section>
<h2>Vorteile</h2>

<ul>
<li>Webseiten müssen dank Ajax nicht komplett neu geladen werden</li>
<li>Der Webserver wird durch Ajax entlastet da statische Daten nicht fortwährend übertragen werden müssen</li>
<li>Die Ajax-Technologie ist frei zugänglich und plattform-unabhängig. Es wird kein Browser-Plugin benötigt um Ajax zu nutzen</li>
</ul>
</section>
				
<section>
<h2>Nachteile</h2>

<ul>
<li>Webbrowser muss Javascript unterstützen.</li>
<li>Server kann ohne Anforderungen keine asynchronen Events an Ajax-Client durchleiten (Polling-Problem). Deswegen muss der Ajax-Client ständig Anfragen senden. 
So entsteht eine hohe Auslastung des Servers</li>
<li>Die Lesezeichen-Funktion und "Zurück"-Funktion eines Webbrowsers funktionieren in Zusammenhang mit Ajax nicht richtig</li>
<li>Durch eine hohe Latenz kann es länger dauern die Daten vom Webserver zu laden. Durch vorausschauendes Laden kann man die Ladezeit verkürzen. Es werden also Inhalte geladen die der Nutzer als Nächstes anklicken könnte</li>
<li>Visuelles Feedback geben um zu verdeutlichen dass die Anwendung nicht abgestürzt ist sondern Daten lädt</li>
<li>Keine Barrierefreiheit da Ajax hauptsächlich für grafische Webbrowser entwickelt wurde</li>
</ul>
</section>


<section>
<h2>Nutzung eines Frameworks, z.B: jQuery</h2>

<pre>
	<code>
var jqxhr = $.ajax( "example.php" )
  .done(function() {
    alert( "success" );
  })
  .fail(function() {
    alert( "error" );
  })
  .always(function() {
    alert( "complete" );
  });
	</code>
</pre>

</section>            
			</div>

	</div>

	<script src="../revealjs-framework/lib/js/head.min.js"></script>
	<script src="../revealjs-framework/js/reveal.min.js"></script>

	<script>
		// Full list of configuration options available here:
		 // https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			controls: true,
			progress: true,
			history: true,
			center: false,
			width: 1000,

			transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none
			transitionSpeed: 'fast', // default/fast/slow
			backgroundTransition: 'none', // default/linear/none

			// Optional libraries used to extend on reveal.js
			dependencies: [
				{
					src: '../revealjs-framework/lib/js/classList.js',
					condition: function () {
						return !document.body.classList;
					}
				},
				{
					src: '../revealjs-framework/plugin/markdown/marked.js',
					condition: function () {
						return !!document.querySelector('[data-markdown]');
					}
				},
				{
					src: '../revealjs-framework/plugin/markdown/markdown.js',
					condition: function () {
						return !!document.querySelector('[data-markdown]');
					}
				},
				{
					src: '../revealjs-framework/plugin/highlight/highlight.js',
					async: true,
					callback: function () {
						hljs.initHighlightingOnLoad();
					}
				},
				{
					src: '../revealjs-framework/plugin/zoom-js/zoom.js',
					async: true,
					condition: function () {
						return !!document.body.classList;
					}
				},
				{
					src: '../revealjs-framework/plugin/notes/notes.js',
					async: true,
					condition: function () {
						return !!document.body.classList;
					}
				}
				]
		});
	</script>

</body>

</html>
